<!DOCTYPE html>
<html lang="en">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Bash script tutorial - Han&#39;s XYZ</title><meta name="Description" content="A gentle introduction to bash scripting"><meta property="og:title" content="Bash script tutorial" />
<meta property="og:description" content="A gentle introduction to bash scripting" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/20240421_the-shell-script-tutorial/" /><meta property="og:image" content="http://localhost:1313/logo.png" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-04-21T00:00:00+00:00" />
<meta property="article:modified_time" content="2024-04-21T00:00:00+00:00" /><meta property="og:site_name" content="Han" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="http://localhost:1313/logo.png" /><meta name="twitter:title" content="Bash script tutorial"/>
<meta name="twitter:description" content="A gentle introduction to bash scripting"/>
<meta name="application-name" content="KeepIt">
<meta name="apple-mobile-web-app-title" content="KeepIt"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="http://localhost:1313/20240421_the-shell-script-tutorial/" /><link rel="prev" href="http://localhost:1313/20240421_why-linux/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Bash script tutorial",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/localhost:1313\/20240421_the-shell-script-tutorial\/"
        },"genre": "posts","keywords": "Python, bash, shell script, linux","wordcount":  1978 ,
        "url": "http:\/\/localhost:1313\/20240421_the-shell-script-tutorial\/","datePublished": "2024-04-21T00:00:00+00:00","dateModified": "2024-04-21T00:00:00+00:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "Han"
            },"description": "A gentle introduction to bash scripting"
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Han&#39;s XYZ"><span class="header-title-pre"><i class='fa fa-home ' aria-hidden='true'></i></span>Han&#39;s XYZ</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/tags/"> Tags </a><a class="menu-item" href="/categories/"> Categories </a><a class="menu-item" href="/about/"> About </a><a class="menu-item" href="https://github.com/Han8931" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw' aria-hidden='true'></i>  </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Han&#39;s XYZ"><span class="header-title-pre"><i class='fa fa-home ' aria-hidden='true'></i></span>Han&#39;s XYZ</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/tags/" title="">Tags</a><a class="menu-item" href="/categories/" title="">Categories</a><a class="menu-item" href="/about/" title="">About</a><a class="menu-item" href="https://github.com/Han8931" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw' aria-hidden='true'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Bash script tutorial</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Han</a>
</span>&nbsp;<span class="post-category">included in <a href="/categories/programming/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>Programming</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2024-04-21">2024-04-21</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;1978 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;10 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#variables">Variables</a></li>
    <li><a href="#escape-characters">Escape Characters</a></li>
    <li><a href="#loop">Loop</a>
      <ul>
        <li><a href="#for-loop">For Loop</a></li>
        <li><a href="#while-loop">While Loop</a></li>
      </ul>
    </li>
    <li><a href="#test">Test</a></li>
    <li><a href="#case">Case</a></li>
    <li><a href="#variables-2">Variables 2</a></li>
    <li><a href="#functions">Functions</a></li>
    <li><a href="#reference">Reference</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>Let&rsquo;s create our first simple shell script</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/sh
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="c1"># This is a comment!</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> Hello World        <span class="c1"># This is a comment, too!</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>The first line tells Unix that the file is to be executed by <code>/bin/sh</code>. This is the standard location of the <em>Bourne shell</em> on just about every Unix system. If you&rsquo;re using GNU/Linux, /bin/sh is normally a symbolic link to bash (or, more recently, dash).</li>
<li>The second line begins with a special symbol: <code>#</code>. This marks the line as a comment, and it is ignored completely by the shell.</li>
<li>The only exception is when the <em>very first</em> line of the file starts with <code>#!</code> (shebang) - as ours does. This is a special directive which Unix treats specially. It means that even if you are using csh, ksh, or anything else as your interactive shell, that what follows should be interpreted by the Bourne shell.</li>
<li>Similarly, a Perl script may start with the line <code>#!/usr/bin/perl</code> to tell your interactive shell that the program which follows should be executed by perl. For Bourne shell programming, we shall stick to <code>#!/bin/sh.</code></li>
<li>The third line runs a command: <code>echo</code>, with two parameters, or arguments - the first is <code>&quot;Hello&quot;</code>; the second is <code>&quot;World&quot;</code>.</li>
<li>Note that <code>echo</code> will automatically put a single space between its parameters.</li>
<li>To make it executable, run <code>chmod +rx &lt;filename&gt;</code></li>
</ul>
<h2 id="variables">Variables</h2>
<p>Let&rsquo;s look back at our first Hello World example. This could be done using variables. Note that <em>there must be no spaces around the &ldquo;<code>=</code>&rdquo; sign</em>: <code>VAR=value</code> works; <code>VAR = value</code> doesn&rsquo;t work. In the first case, the shell sees the &ldquo;<code>=</code>&rdquo; symbol and treats the command as a variable assignment. In the second case, the shell assumes that VAR must be the name of a command and tries to execute it.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/sh  
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="nv">MY_MESSAGE</span><span class="o">=</span><span class="s2">&#34;Hello World&#34;</span>  
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$MY_MESSAGE</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>This assigns the string &ldquo;Hello World&rdquo; to the variable <code>MY_MESSAGE</code> then <code>echo</code>es out the value of the variable.</li>
<li>Note that we need the quotes around the string Hello World. Whereas we could get away with <code>echo Hello World</code> because echo will take any number of parameters, a variable can only hold one value, so a string with spaces must be quoted so that the shell knows to treat it all as one. Otherwise, the shell will try to execute the command <code>World</code> after assigning <code>MY_MESSAGE=Hello</code></li>
<li>The shell does not care about types of variables; they may store strings, integers, real numbers - anything you like.</li>
</ul>
<p>We can interactively set variable names using the <code>read</code> command; the following script asks you for your name then greets you personally</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/sh  
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="nb">echo</span> What is your name?  
</span></span><span class="line"><span class="cl"><span class="nb">read</span> MY_NAME
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Hello </span><span class="nv">$MY_NAME</span><span class="s2"> - hope you&#39;re well.&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="escape-characters">Escape Characters</h2>
<p>Certain characters are significant to the shell; for example, that the use of double quotes (<code>&quot;</code>) characters affect how spaces and TAB characters are treated, for example:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ echo Hello       World
</span></span><span class="line"><span class="cl">Hello World
</span></span><span class="line"><span class="cl">$ echo &#34;Hello       World&#34;
</span></span><span class="line"><span class="cl">Hello     World
</span></span></code></pre></td></tr></table>
</div>
</div><p>So how do we display: <code>Hello    &quot;World&quot;</code> ?
<code>$ echo &quot;Hello   \&quot;World\&quot;&quot;</code></p>
<p>The first and last &quot; characters wrap the whole lot into one parameter passed to <code>echo</code> so that the spacing between the two words is kept as is. But the code:
<code>$ echo &quot;Hello   &quot; World &quot;&quot;</code>
would be interpreted as three parameters:</p>
<ol>
<li>&ldquo;Hello   &quot;</li>
<li>World</li>
<li>&quot;&rdquo;</li>
</ol>
<p>So the output would be
<code>Hello    World</code>
Note that we lose the quotes entirely. This is because the first and second quotes mark off the Hello and following spaces; the second argument is an unquoted &ldquo;World&rdquo; and the third argument is the empty string; &ldquo;&rdquo;.</p>
<h2 id="loop">Loop</h2>
<h3 id="for-loop">For Loop</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/sh
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">for</span> i in <span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span> <span class="m">5</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">  <span class="nb">echo</span> <span class="s2">&#34;Looping ... number </span><span class="nv">$i</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/sh
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">for</span> i in hello <span class="m">1</span> * <span class="m">2</span> goodbye 
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">  <span class="nb">echo</span> <span class="s2">&#34;Looping ... i is set to </span><span class="nv">$i</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>The output of the above code is</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Looping ... i is set to hello
</span></span><span class="line"><span class="cl">Looping ... i is set to 1
</span></span><span class="line"><span class="cl">Looping ... i is set to (name of first file in current directory)
</span></span><span class="line"><span class="cl">    ... etc ...
</span></span><span class="line"><span class="cl">Looping ... i is set to (name of last file in current directory)
</span></span><span class="line"><span class="cl">Looping ... i is set to 2
</span></span><span class="line"><span class="cl">Looping ... i is set to goodbye
</span></span></code></pre></td></tr></table>
</div>
</div><p>This is well worth trying. Make sure that you understand what is happening here. Try it without the <code>*</code> and grasp the idea, then re-read the <a href="https://www.shellscript.sh/wildcards.html" target="_blank" rel="noopener noreffer">Wildcards</a>
 section and try it again with the <code>*</code> in place. Try it also in different directories, and with the <code>*</code> surrounded by double quotes, and try it preceded by a backslash (<code>\*</code>)</p>
<h3 id="while-loop">While Loop</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/sh
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="nv">INPUT_STRING</span><span class="o">=</span>hello
</span></span><span class="line"><span class="cl"><span class="k">while</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$INPUT_STRING</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;bye&#34;</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">  <span class="nb">echo</span> <span class="s2">&#34;Please type something in (bye to quit)&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">read</span> INPUT_STRING
</span></span><span class="line"><span class="cl">  <span class="nb">echo</span> <span class="s2">&#34;You typed: </span><span class="nv">$INPUT_STRING</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/sh
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">while</span> :
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">  <span class="nb">echo</span> <span class="s2">&#34;Please type something in (^C to quit)&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">read</span> INPUT_STRING
</span></span><span class="line"><span class="cl">  <span class="nb">echo</span> <span class="s2">&#34;You typed: </span><span class="nv">$INPUT_STRING</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>The colon (<code>:</code>) always evaluates to true; whilst using this can be necessary sometimes, it is often preferable to use a real exit condition. Compare quitting the above loop with the one below; see which is the more elegant. Also think of some situations in which each one would be more useful than the other:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/sh
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">while</span> <span class="nb">read</span> input_text
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">  <span class="k">case</span> <span class="nv">$input_text</span> in
</span></span><span class="line"><span class="cl">        hello<span class="o">)</span>          <span class="nb">echo</span> English    <span class="p">;;</span>
</span></span><span class="line"><span class="cl">        howdy<span class="o">)</span>          <span class="nb">echo</span> American   <span class="p">;;</span>
</span></span><span class="line"><span class="cl">        gday<span class="o">)</span>           <span class="nb">echo</span> Australian <span class="p">;;</span>
</span></span><span class="line"><span class="cl">        bonjour<span class="o">)</span>        <span class="nb">echo</span> French     <span class="p">;;</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;guten tag&#34;</span><span class="o">)</span>    <span class="nb">echo</span> German     <span class="p">;;</span>
</span></span><span class="line"><span class="cl">        *<span class="o">)</span>              <span class="nb">echo</span> Unknown Language: <span class="nv">$input_text</span>
</span></span><span class="line"><span class="cl">                <span class="p">;;</span>
</span></span><span class="line"><span class="cl">   <span class="k">esac</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span> &lt; myfile.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>This reads the file &ldquo;<code>myfile.txt</code>&rdquo;, one line at a time, into the variable &ldquo;<code>$input_text</code>&rdquo;. The <a href="https://www.shellscript.sh/case.html" target="_blank" rel="noopener noreffer">case</a>
 statement then checks the value of <code>$input_text</code>. If the word that was read from <code>myfile.txt</code> was &ldquo;hello&rdquo; then it <code>echo</code>es the word &ldquo;English&rdquo;. If it was &ldquo;gday&rdquo; then it will <code>echo Australian</code>. If the word (or words) read from a line of <code>myfile.txt</code> don&rsquo;t match any of the provided patterns, then the catch-all &ldquo;*&rdquo; default will display the message &ldquo;Unknown Language: $input_text&rdquo; - where of course &ldquo;$input_text&rdquo; is the value of the line that it read in from <code>myfile.txt</code>.</p>
<p>A handy Bash (but not Bourne Shell) tip I learned recently from the <a href="http://www.linuxfromscratch.org/" target="_blank" rel="noopener noreffer">Linux From Scratch</a>
 project is:
<code>mkdir rc{0,1,2,3,4,5,6,S}.d</code></p>
<p>instead of the more cumbersome:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="k">for</span> runlevel in <span class="m">0</span> <span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span> <span class="m">5</span> <span class="m">6</span> S
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">  mkdir rc<span class="si">${</span><span class="nv">runlevel</span><span class="si">}</span>.d
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>And <code>ls</code> can be done recursively, too:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ cd /
</span></span><span class="line"><span class="cl">$ ls -ld {,usr,usr/local}/{bin,sbin,lib}
</span></span><span class="line"><span class="cl">drwxr-xr-x    2 root     root         4096 Oct 26 01:00 /bin
</span></span><span class="line"><span class="cl">drwxr-xr-x    6 root     root         4096 Jan 16 17:09 /lib
</span></span><span class="line"><span class="cl">drwxr-xr-x    2 root     root         4096 Oct 27 00:02 /sbin
</span></span><span class="line"><span class="cl">drwxr-xr-x    2 root     root        40960 Jan 16 19:35 usr/bin
</span></span><span class="line"><span class="cl">drwxr-xr-x   83 root     root        49152 Jan 16 17:23 usr/lib
</span></span><span class="line"><span class="cl">drwxr-xr-x    2 root     root         4096 Jan 16 22:22 usr/local/bin
</span></span><span class="line"><span class="cl">drwxr-xr-x    3 root     root         4096 Jan 16 19:17 usr/local/lib
</span></span><span class="line"><span class="cl">drwxr-xr-x    2 root     root         4096 Dec 28 00:44 usr/local/sbin
</span></span><span class="line"><span class="cl">drwxr-xr-x    2 root     root         8192 Dec 27 02:10 usr/sbin
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="test">Test</h2>
<p>Test is used by virtually every shell script written. It may not seem that way, because <code>test</code> is not often called directly. <code>test</code> is more frequently called as <code>[</code>. <code>[</code> is a symbolic link to <code>test</code>, just to make shell programs more readable. It is also normally a shell builtin (which means that the shell itself will interpret <code>[</code> as meaning <code>test</code>, even if your Unix environment is set up differently):</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ type [
</span></span><span class="line"><span class="cl">[ is a shell builtin
</span></span><span class="line"><span class="cl">$ which [
</span></span><span class="line"><span class="cl">/usr/bin/[
</span></span><span class="line"><span class="cl">$ ls -l /usr/bin/[
</span></span><span class="line"><span class="cl">lrwxrwxrwx 1 root root 4 Mar 27 2000 /usr/bin/[ -&gt; test
</span></span><span class="line"><span class="cl">$ ls -l /usr/bin/test
</span></span><span class="line"><span class="cl">-rwxr-xr-x 1 root root 35368 Mar 27  2000 /usr/bin/test
</span></span></code></pre></td></tr></table>
</div>
</div><p>This means that &lsquo;<code>[</code>&rsquo; is actually a program, just like <code>ls</code> and other programs, so it must be surrounded by spaces:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">if [$foo = &#34;bar&#34; ]
</span></span></code></pre></td></tr></table>
</div>
</div><p>will not work; it is interpreted as <code>if test$foo = &quot;bar&quot; ]</code>, which is a &lsquo;<code>]</code>&rsquo; without a beginning &lsquo;<code>[</code>&rsquo;. Put spaces around all your operators. I&rsquo;ve highlighted the mandatory spaces with the word <strong>&lsquo;SPACE&rsquo;</strong> .</p>
<blockquote>
<p>Note: Some shells also accept &ldquo;<code>==</code>&rdquo; for string comparison; this is not portable, a single &ldquo;<code>=</code>&rdquo; should be used for strings, or &ldquo;<code>-eq</code>&rdquo; for integers.</p>
</blockquote>
<p>Test is a simple but powerful comparison utility. For full details, run <code>man test</code> on your system, but here are some usages and typical examples.</p>
<p>Test is most often invoked indirectly via the <code>if</code> and <code>while</code> statements. It is also the reason you will come into difficulties if you create a program called <code>test</code> and try to run it, as this shell builtin will be called instead of your program!  The syntax for <code>if...then...else...</code> is:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> ... <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">  <span class="c1"># if-code</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">  <span class="c1"># else-code</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Also, be aware of the syntax - the &ldquo;<code>if [ ... ]</code>&rdquo; and the &ldquo;<code>then</code>&rdquo; commands must be on different lines. Alternatively, the semicolon &ldquo;<code>;</code>&rdquo; can separate them:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> ... <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">  <span class="c1"># do something</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>You can also use the <code>elif</code>, like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="k">if</span>  <span class="o">[</span> something <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl"> <span class="nb">echo</span> <span class="s2">&#34;Something&#34;</span>
</span></span><span class="line"><span class="cl"> <span class="k">elif</span> <span class="o">[</span> something_else <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">   <span class="nb">echo</span> <span class="s2">&#34;Something else&#34;</span>
</span></span><span class="line"><span class="cl"> <span class="k">else</span>
</span></span><span class="line"><span class="cl">   <span class="nb">echo</span> <span class="s2">&#34;None of the above&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>This will <code>echo &quot;Something&quot;</code> if the <code>[ something ]</code> test succeeds, otherwise it will test <code>[ something_else ]</code>, and <code>echo &quot;Something else&quot;</code> if that succeeds. If all else fails, it will <code>echo &quot;None of the above&quot;</code>.</p>
<h2 id="case">Case</h2>
<p>The <code>case</code> statsement saves going through a whole set of <code>if ... then ... else</code> statements. Its syntax is really simple:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/sh
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Please talk to me ...&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">while</span> :
</span></span><span class="line"><span class="cl"><span class="k">do</span> 
</span></span><span class="line"><span class="cl">	<span class="nb">read</span> INPUT_STRING
</span></span><span class="line"><span class="cl">	<span class="k">case</span> <span class="nv">$INPUT_STRING</span> in
</span></span><span class="line"><span class="cl">		hello<span class="o">)</span>
</span></span><span class="line"><span class="cl">			<span class="nb">echo</span> <span class="s2">&#34;Hello yourself!&#34;</span>
</span></span><span class="line"><span class="cl">			<span class="p">;;</span>
</span></span><span class="line"><span class="cl">		bye<span class="o">)</span>
</span></span><span class="line"><span class="cl">			<span class="nb">echo</span> <span class="s2">&#34;See you again!&#34;</span>
</span></span><span class="line"><span class="cl">			<span class="nb">break</span>
</span></span><span class="line"><span class="cl">			<span class="p">;;</span>
</span></span><span class="line"><span class="cl">		*<span class="o">)</span>
</span></span><span class="line"><span class="cl">			<span class="nb">echo</span> <span class="s2">&#34;Sorry I don&#39;t understand&#34;</span>
</span></span><span class="line"><span class="cl">			<span class="p">;;</span>
</span></span><span class="line"><span class="cl">	<span class="k">esac</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="variables-2">Variables 2</h2>
<p>The first set of variables we will look at are <code>$0 ... $9</code> and <code>$#</code>. The variable <code>$0</code> is the basename of the program as it was called. <code>$1...$9</code> are the first 9 additional parameters the script was called with. The variable <code>$@</code> is all parameters. The variable <code>$*</code> is similar, but does not preserve any whitespace and quoting, so &ldquo;File with spaces&rdquo; becomes &ldquo;File&rdquo;, &ldquo;with&rdquo;, and &ldquo;spaces&rdquo;. <code>$#</code> is the number of parameters the script was called with.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/sh
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="nb">echo</span> <span class="s2">&#34;I was called with </span><span class="nv">$#</span><span class="s2"> parameters&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;My name is </span><span class="nv">$0</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;My first parameter is </span><span class="nv">$1</span><span class="s2">&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>The othere two main variables set are <code>$$</code> and <code>$!</code>. These are both process numbers. The <code>$$</code> variable is the PID of the currently running shell. This can be useful for creating temporary files, such as <code>/tmp/my-script.$$</code> which is useful if many instances of the script could be run at the same time, and they all need their own temporary files.</p>
<p>The <code>$!</code> variable is the PID of the last run background processd. This is useful to keep track of the process as it gets on with its job.</p>
<p>Another interesting vardfiable is <code>IFS</code>. This is the <em>Interfal Field Separator</em>. The default value is <code>SPACE TAB NEWLINE</code>, but if you are changing it, it&rsquo;s easier to take a copy as shown:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/sh
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="nv">old_IFS</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$IFS</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">IFS</span><span class="o">=</span>: <span class="c1"># Set IFS as colon</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Please input some data separated by colons&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">read</span> x y z
</span></span><span class="line"><span class="cl"><span class="nv">IFS</span><span class="o">=</span><span class="nv">$old_IFS</span> 
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;x is </span><span class="nv">$x</span><span class="s2"> y is </span><span class="nv">$y</span><span class="s2"> z is </span><span class="nv">$z</span><span class="s2">&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="functions">Functions</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/sh
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">add_a_user<span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"><span class="nv">USER</span><span class="o">=</span><span class="nv">$1</span>
</span></span><span class="line"><span class="cl"><span class="nv">PASSWORD</span><span class="o">=</span><span class="nv">$2</span>
</span></span><span class="line"><span class="cl"><span class="nv">COMMENTS</span><span class="o">=</span><span class="nv">$@</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Adding user </span><span class="nv">$USER</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> useradd -c <span class="s2">&#34;</span><span class="nv">$COMMENTS</span><span class="s2">&#34;</span> <span class="nv">$USER</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> passwd <span class="nv">$USER</span> <span class="nv">$PASSWORD</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="reference">Reference</h2>
<ul>
<li><a href="https://www.shellscript.sh/first.html" target="_blank" rel="noopener noreffer">shellscript</a>
</li>
</ul>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2024-04-21</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/20240421_the-shell-script-tutorial/index.md" target="_blank">Read Markdown</a>
                        </span></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/python/">Python</a>,&nbsp;<a href="/tags/bash/">Bash</a>,&nbsp;<a href="/tags/shell-script/">Shell Script</a>,&nbsp;<a href="/tags/linux/">Linux</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/20240421_why-linux/" class="prev" rel="prev" title="Minimalism Through Linux"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>Minimalism Through Linux</a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.123.7">Hugo</a> | Theme - <a href="https://github.com/Fastbyte01/KeepIt" target="_blank" rel="noopener noreffer" title="KeepIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> KeepIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2019 - 2024</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Han</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/algoliasearch/algoliasearch-lite.umd.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{},"search":{"algoliaAppID":"PASDMWALPK","algoliaIndex":"index.en","algoliaSearchKey":"b42948e51daaa93df92381c8e2ac0f93","highlightTag":"em","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30,"type":"algolia"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
